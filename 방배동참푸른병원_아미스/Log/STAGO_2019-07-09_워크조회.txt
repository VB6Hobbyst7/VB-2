SELECT DISTINCT       O.ACPTDATE              as HOSPDATE                 
     , R.SPCMNO                as BARCODE                  
     , P.PATID                 as PID                      
     , P.PATNAME               as PNAME                    
     , P.SEX                   as SEX                      
     , COUNT(R.RESULTITEMCODE) as CNT                      
  FROM REGISTINFOS O, RESULTOFNUM R, PATMST P              
 WHERE O.ACPTDATE  = R.ACPTDATE                            
   AND O.PATID     = R.PATID                               
   AND O.ACPTSEQ   = R.ACPTSEQ                             
   AND O.PATID     = P.PATID                               
   AND O.ACPTDATE BETWEEN '20190709' and '20190709'
   AND R.RESULTITEMCODE IN ('XH102002','XH102003','XH102001','D1004')            
   AND O.CLAS          = 4                                 
   AND R.RESULTFLAG    = 0                                 
 GROUP BY O.ACPTDATE,R.SPCMNO,P.PATID,P.PATNAME,P.SEX      
 ORDER BY R.SPCMNO                                         

