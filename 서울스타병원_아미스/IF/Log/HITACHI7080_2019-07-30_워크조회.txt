SELECT DISTINCT       O.ACPTDATE              AS HOSPDATE                 
     , R.SPCMNO                AS BARCODE                  
     , P.PATID                 AS PID                      
     , P.PATNAME               AS PNAME                    
     , P.SEX                   AS SEX                      
     , COUNT(R.RESULTITEMCODE) AS CNT                      
  FROM REGISTINFOS O                                       
     , RESULTOFNUM R                                       
     , PATMST      P                                       
 WHERE O.ACPTDATE BETWEEN '20190730' and '20190730'
   AND O.ACPTDATE  = R.ACPTDATE                            
   AND O.PATID     = R.PATID                               
   AND O.ACPTSEQ   = R.ACPTSEQ                             
   AND O.PATID     = P.PATID                               
   AND O.CLAS          = 4                                 
   AND R.RESULTITEMCODE IN ('C2200','C2210','B2570','B2580','B2602','C3720','B2710','C2443','C3730','C3750','C2411','C3711','C2420','C3780','C2243','C----')            
   AND (R.NUMRESULTVAL = '' OR R.NUMRESULTVAL IS NULL)     
 GROUP BY O.ACPTDATE, R.SPCMNO, P.PATID, P.PATNAME, P.SEX  
 ORDER BY O.ACPTDATE, R.SPCMNO                             

